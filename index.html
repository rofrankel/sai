<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="css/jquery.snippet.min.css" />
        <link rel="stylesheet" type="text/css" href="css/sai.css" />
        
        <script type="text/javascript" src="lib/jquery-1.5.min.js"></script>
        <script type="text/javascript" src="lib/raphael-min.js"></script>
        <script type="text/javascript" src="lib/jquery.snippet.min.js"></script>        
        <script type="text/javascript" src="lib/coffee-script.js"></script>        
        
        <script type="text/javascript" src="lib/sai-min.js"></script>
        <script type="text/javascript" src="data/us.svg.json"></script>
        <script type="text/javascript" src="data/europe.svg.json"></script>
        <script type="text/javascript" src="data/world.svg.json"></script>
        
        <script type="text/coffeescript" src="lib/showcode.coffee"></script>
        
        <script type="text/coffeescript">
            $(document).ready( ->
                $('a[href="#"]').each((i, e) ->
                    $(e).click((e) ->
                        e.preventDefault()
                    )
                )
            )
        </script>
    </head>
    
    <body>
        <div id="main">
            
            <h1>Sai.JS - a CoffeeScript charting library</h1>
            
            <div id="desc">
                <p>
                    Sai is a charting library written in <a href="http://coffeescript.org">CoffeeScript</a> and
                    using <a href="http://raphaeljs.com">Raphael.JS</a> for cross-browser rendering (VML in IE<8, SVG
                    elsewhere).
                </p>
                <h2>Features</h2>
                <ul class="feature-list">
                    <li>Several types of charts
                    <ul>
                        <li>Line charts
                        <ul>
                            <li>Stacked or regular</li>
                            <li>Drawn as area or line
                            <li>Support for dual axes
                        </ul>
                        <li>Bar (well, column) charts
                        <ul>
                            <li>Grouped or stacked bars
                        </ul>
                        <li>Stock (candlestick) charts
                        <ul>
                            <li>Support for volume bars
                            <li>Extra data shown as lines; useful for e.g. moving averages
                        </ul>
                        <li>Scatter charts
                        <ul>
                            <li>Supports symbolic and continuous variables in several dimensions
                        </ul>
                        <li>Geographical charts
                        <ul>
                            <li>Global, US, and Europe map data provided
                        </ul>
                    </ul>
                    <li>High optionality/configurability
                    <li>Simple usage - just input data and options
                    <li>For developers: Modular and extensible design; easy to add new chart types
                </ul>
                <h2>Examples</h2>
                <p>
                    Below are some examples of the kinds of charts Sai can
                    be used to create.  But first, let's set up some simple
                    data which will be shared by multiple charts:
                </p>
                <script type="text/javascript" class="show">
                    var colors = {
                        Alice: '#7C9AFC',
                        Bob: '#C46A6A',
                        Carol: '#444E73',
                        Dave: '#43783A'
                    };
                    var data = {
                        Alice: [5, 2, 5, 1, 2, 6, 2, 4],
                        Bob: [7, 3, 6, 12, 9, 4, 3, 1],
                        Carol: [3, 2, 5, 2, 5, 2, 1, 3],
                        Dave: [1, 1, 4, 5, 6, 5, 2, 3],
                        Month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August']
                    };
                </script>
                <p>
                    There are two simple things worth noting in this code.  First, <code>colors</code> and <code>data</code> use the same keys.  Second, the data is stored as several parallel lists.  Both of these things are requirements of Sai's API.
                </p>
            </div>
            <h3>Line</h3>
            <p>
                One of the most common types of chart supported by Sai is the line chart.  
            </p>
            <div id="line_chart_holder" class="chart-holder"></div>
            <script type="text/javascript" class="show">
                // line_chart_holder is the id of an empty div
                var r1 = Raphael("line_chart_holder", 400, 400);
                var line_chart = new Sai.LineChart(r1, 0, 400, 400, 400, data, "Month", {colors: colors});
                line_chart.render();
            </script>
            <p>
                There are a few important things to notice in this code.
                First, you have to create a Raphael canvas* separately from creating a Sai chart.  This allows you to have one canvas with multiple charts if you so choose.
                Second, any Sai chart constructor takes a few required arguments.  They are, in order:  Raphael canvas object, x, y, width, height, data, name of x-axis data series.
                Third, the origin of the chart is the bottom left - so the value you pass for <code>y</code> should not be 0, or the chart will be drawn above the top of the canvas!
            </p>
            <p>
                Some of the features of line charts not displayed here include dual y-axes, user interaction, stacked data, and area plots (as opposed to line plots).
            </p>
            <p>
                * I'm using the term 'canvas' with reference to Raphael because that is the terminology Raphael uses in its own documentation.  Of course, Raphael uses SVG/VML, not HTML Canvas.
            </p>
            <h3>Bar</h3>
            <p>
                Sai also supports bar (well, column) charts.  This time, let's explore some more options.  First, let's set a title and background color for the chart.  Let's also enable interaction (try mousing over the groups of bars below).
            </p>
            <div id="bar_chart_holder" class="chart-holder"></div>
            <script type="text/javascript" class="show">
                var r2 = Raphael("bar_chart_holder", 400, 400);
                var options = {
                    title: "A simple bar chart",
                    bgcolor: '#eef',
                    interactive: 'true',
                    colors: colors
                }
                var bar_chart = new Sai.BarChart(r2, 0, 400, 400, 400, data, "Month", options).render();
            </script>
            <p>
                Note that the call to <code>render()</code> is chained to the chart constructor in this example.  Sai supports jQuery-esque method chaining.
            </p>
            <p>
                You might be wondering why there's a separate method for rendering at all.  The answer is that charts can be rerendered after certain things are updated.  This feature is not currently as robust (nor as efficient) as it is planned to be,
                but you can at least update colors and redraw the chart by calling render again.  Click <a href="#" onclick="bar_chart.setColor('Alice', 'red').render();">here</a> to change the color of 'Alice' in the bar chart above.
            </p>
        </div>
    </body>
</html>