(function(){Sai={};var m,p;Sai.util={};Sai.imagePath!=null||(Sai.imagePath="/static/images/sai/");Sai.util.roundToMag=function(e,a){var b;if(a==null)a=0;b=Math.pow(10,a);return parseFloat((Math.round(e/b)*b).toFixed(Math.max(0,a)))};Sai.util.round=function(e,a){return parseFloat((Math.round(e/a)*a).toFixed(Math.max(0,Math.ceil(-1*Math.log(a)/Math.LN10))))};Sai.util.sumArray=function(e){var a,b,c;a=b=0;for(c=e.length;0<=c?a<c:a>c;0<=c?a+=1:a-=1)b+=typeof e[a]==="number"?e[a]:0;return b};Sai.util.prettystr=
function(e,a){var b,c;b=a!=null?a:1;a!=null||(a=2);if(typeof e==="number"){if(Math.abs(e)>=1E12){c="t";e/=1E12}else if(Math.abs(e)>=1E9){if(b>=8)return e;c="b";e/=1E9}else if(Math.abs(e)>=1E6){if(b>=5)return e;c="m";e/=1E6}else if(Math.abs(e)>=1E3){if(b>=2)return e;c="k";e/=1E3}else return String(parseFloat(e.toFixed(a)));return parseFloat(e.toFixed(b))+c}return e};Sai.util.prettynum=function(e){var a;if(!(isNaN(parseFloat(e))||!String(e).match(/^[-+]?\d+(\.\d+)?$/))){e=String(e).split(".");for(a=
/(\d+)(\d{3})/;a.test(e[0]);)e[0]=e[0].replace(a,"$1,$2");return e[0]+(e.length>1?parseFloat("0."+e[1]).toFixed(2).slice(1):"")}};Sai.util.infoSetters=function(e,a){return[function(){return e(a)},function(){return e()}]};Sai.util.transformCoords=function(e,a){var b;if(a.getScreenCTM){b=a.createSVGPoint();b.x=e.clientX;b.y=e.clientY;b=b.matrixTransform(a.getScreenCTM().inverse());if(navigator.userAgent.toLowerCase().indexOf("chrome")!==-1||navigator.userAgent.toLowerCase().indexOf("safari")!==-1){b.x+=
document.body.scrollLeft;b.y+=document.body.scrollTop}return{x:b.x,y:b.y}}else return{x:e.x,y:e.y}};Sai.util.multiplyColor=function(e,a,b,c){if(c==null)c=0;a=c+(1-c)*a;c=Raphael.getRGB(e);if(b){e=c.r+(255-c.r)*(1-a);b=c.g+(255-c.g)*(1-a);a=c.b+(255-c.b)*(1-a)}else{e=c.r*a;b=c.g*a;a=c.b*a}return{r:e,g:b,b:a,str:"rgb("+e+", "+b+", "+a+")"}};Sai.util.colerp=function(e,a,b){e=Raphael.getRGB(e);a=Raphael.getRGB(a);return"rgb("+(a.r*b+e.r*(1-b))+", "+(a.g*b+e.g*(1-b))+", "+(a.b*b+e.b*(1-b))+")"};Sai.util.reflectColor=
function(e,a){var b,c,d,g,f,j,h,i,l;d=Raphael.getRGB(e);f=Raphael.getRGB(a);j={};l=["r","g","b"];h=0;for(i=l.length;h<i;h++){c=l[h];b=d[c];g=f[c];j[c]=b===g?b:b>g?g*((255-b)/(255-g)):(255*(g-b)+g*b)/g}return"rgb("+j.r+", "+j.g+", "+j.b+")"};Sai.util.getHoverfuncs=function(e,a,b,c){return[function(){e.attr(a);return c!=null?typeof c[0]==="function"?c[0](e):void 0:void 0},function(){e.attr(b);return c!=null?typeof c[1]==="function"?c[1](e):void 0:void 0}]};Sai.data!=null||(Sai.data={});(m=Sai.data).map!=
null||(m.map={});(p=Raphael.fn).sai!=null||(p.sai={});Raphael.fn.sai.chart=function(e,a,b,c,d,g){var f;d=(f={line:Sai.LineChart}[d])!=null?f:d;d!=null||(d=Sai.Chart);return(new d(this,e,a,b,c,g)).render()}}).call(this);(function(){var m,p=Array.prototype.indexOf||function(e){for(var a=0,b=this.length;a<b;a++)if(this[a]===e)return a;return-1};(m=Raphael.fn.sai).prim!=null||(m.prim={});Raphael.fn.sai.prim.haxis=function(e,a,b,c,d){var g,f,j,h,i,l,k,o,q,n,r,t,s,u,w,x,y,C,z;t=(w=d.ticklens)!=null?w:[5,2];w=(j=d.width)!=null?j:1;j=(n=d.color)!=null?n:"black";o=this.path("M"+a+" "+b+"l"+c+" 0").attr("stroke",j);s=this.set();k=this.set();n=c/25;l=n<e.length?Math.ceil(e.length/n):1;h=c/(e.length-1)*l;y=a;x=-1;r=false;n=
0;C=null;i=0;for(z=e.length;0<=z?i<z:i>z;i+=l){g=e[i];if(g!=null){f=t[String(g)?0:1];s.push(this.path("M"+y+" "+b+"l0 "+f).attr("stroke",j));if(g!==""){f=this.text(y,b+f+2,Sai.util.prettystr(g).substring(0,12));g=f.getBBox();q=f.attr("y")+5;f.attr("y",q);if(C==null||q<C)C=q;k.push(f);f=g.width;n=Math.max(f,n);if(g.x<=x+3)r=true;if(g.x+f>x)x=g.x+f}}y+=h}if(d.title!=null)u=this.text(a+c/2,C+14,d.title).attr({"font-size":"12px","font-weight":"bold"});e=this.set().push(o,s,k,u);if(r){u=k.items;c=0;for(d=
u.length;c<d;c++){f=u[c];f.rotate(-90);f.translate(0,f.getBBox().width/2-2)}e.push(this.rect(a,b,1,w+n+t[0]).attr("opacity","0"))}return e};Raphael.fn.sai.prim.vaxis=function(e,a,b,c,d){var g,f,j,h,i,l,k,o,q,n,r,t,s,u,w,x,y;r=(g=d.ticklens)!=null?g:[5,2];g=(o=d.color)!=null?o:"black";n=(l=d.right)!=null?l:false;o=this.path("M"+a+" "+b+"l0 "+-c).attr("stroke",g);t=this.set();l=this.set();j=c/(e.length-1);w=b;u=null;i=[];k=true;x=0;for(y=e.length;x<y;x++){h=e[x];if(h!==null){h=Sai.util.prettystr(h);
if(p.call(i,h)>=0){k=false;break}i.push(h)}}if(!k){x=[];i=0;for(k=e.length;i<k;i++){h=e[i];x.push(Sai.util.prettystr(h,2))}i=x}x=k=0;for(y=e.length;x<y;x++){h=e[x];if(h!==null){h=r[String(h)?0:1];t.push(this.path("M"+a+" "+w+"l"+(n?h:-h)+" 0").attr("stroke",g));q=a+(n?1:-1)*(h+3);h=this.text(q,w,i[k++]);h.attr({"text-anchor":n?"start":"end",fill:g});q+=(n?1:-1)*(h.getBBox().width+8);if(u==null||q<u)u=q;l.push(h)}w-=j}if(d.title!=null){s=this.text(u,b-c/2,d.title).attr({"font-size":"12px","font-weight":"bold"});
e=s.getBBox();s.rotate(-90);f=this.rect(e.x+(e.width-e.height)/2,b,e.height,1).attr({opacity:0})}f!=null||(f=null);return this.set().push(this.set().push(o,t,l,f),s)};Raphael.fn.sai.prim.popup=function(e,a,b){var c,d,g,f,j,h;this.set();h=this.set();d=0;g=a+5+5;if("__HEAD__"in b){c=this.text(e,g,b.__HEAD__).attr({fill:"#cfc","font-size":"12","font-weight":"bold"});d=Math.max(d,c.getBBox().width);h.push(c);g+=17}for(j in b)if(j!=="__HEAD__"){f=this.text(e+5,g,j+" = "+b[j]).attr({fill:"white","font-weight":"bold",
"text-anchor":"start"});d=Math.max(d,f.getBBox().width);g+=10;h.push(f)}b=d+10;this.rect(e,a,b,g-a,5).attr({fill:"black","fill-opacity":".85",stroke:"black"});c!=null&&c.translate(b/2);return h.toFront()};Raphael.fn.sai.prim.legend=function(e,a,b,c,d){var g,f,j,h,i,l,k,o,q;a-=14;i=this.set();j=e;h=a;for(l in c){f=this.text(j+14,h+5,l).attr({fill:(k=d!=null?d[l]:void 0)!=null?k:"black","text-anchor":"start"});g=this.rect(j,h,9,9).attr({fill:(o=c[l])!=null?o:"black",stroke:(q=d!=null?d[l]:void 0)!=
null?q:"black"});g=this.set().push(f,g);f=g.getBBox().width;if(j-e+15+f>b){i.translate(0,-14);g.translate(e-j,a-h);j=e;h=a}j+=f+15;i.push(g)}return i};Raphael.fn.sai.prim.wrappedText=function(e,a,b,c,d){var g,f,j,h;if(c==null)c="";if(d==null)d=" ";typeof spacing!="undefined"&&spacing!==null||(spacing=1);if(!c.match(/^\s*$/)){b=b/6;j=[];for(f=0;f<c.length-1;){g=f+b;h=c.substring(f,g+1);g=g>=c.length?g:h.lastIndexOf(d);j.push(h.substring(0,g));f+=g+1}c=j.join("\n");return this.text(e,a+5*j.length,c).attr({"font-family":"Lucida Console",
"text-anchor":"start"})}};Raphael.fn.sai.prim.info=function(e,a,b,c){var d,g,f,j,h,i;f=this.set();g=e;a=a;for(d in c)if(c[d]!==null){j=d+(d===""?"":": ");j+=typeof c[d]==="string"?c[d]:(i=Sai.util.prettynum(c[d]))!=null?i:Sai.util.prettystr(c[d]);h=6*j.length;if(g-e+h>b){g=e;a+=14}j=this.text(g,a,j).attr({"font-family":"Lucida Console","text-anchor":"start"});g+=h+15;f.push(j)}return f};Raphael.fn.sai.prim.hoverShape=function(e,a,b,c){e=e(this).attr(a);b=Sai.util.getHoverfuncs(e,c&&c[0]||{},c&&c[1]||
{},b);e.mouseover(b[0]);e.mouseout(b[1]);return e};Raphael.fn.sai.prim.histogram=function(e,a,b,c,d,g,f,j,h,i,l,k){var o,q,n,r,t,s;if(g==null)g=0;if(f==null)f=1;if(h==null)h=["black","white"];if(i==null)i="white";if(k==null)k=10;t=this.set();t.push(this.rect(e,a-c,b,c).attr({"stroke-width":0,"stroke-opacity":0,fill:i}));c=a-(c-12);a-=5;t.push(this.text(e,a,Sai.util.prettystr(g)).attr({"text-anchor":"start"}));t.push(this.text(e+b,a,Sai.util.prettystr(f)).attr({"text-anchor":"end"}));a-=7;g={};i=f=
0;for(s=d.length;i<s;i++){n=d[i];n=Math.min(k-1,Math.floor(k*n/1));if(n in g)g[n]+=1;else g[n]=1;f=Math.max(f,g[n])}t.push(this.rect(e,a,b,1).attr({fill:"0-"+h[0]+"-"+((q=h[1])!=null?q:h[0]),"stroke-width":0,"stroke-opacity":0}));a-=1;q=b/k;for(o in g){d=(a-c)*(g[o]/f);t.push(h.length===1?r=Sai.util.multiplyColor(h[0],(parseInt(o)+0.5)/k,l,0.2).str:r=Sai.util.colerp(h[0],h[1],(parseInt(o)+0.5)/k),this.rect(e+(parseInt(o)+0.2)*q,a-d,q*0.6,d).attr({fill:r,"stroke-width":l?0.35:0,"stroke-opacity":l?
1:0,stroke:"#000000"}))}t.push(this.text(e+b/2,c-6,Sai.util.prettystr(j)));return t}}).call(this);(function(){Raphael.fn.sai.prim.candlestick=function(m,p,e,a,b,c,d,g,f,j,h){if(d==null)d="black";c%2||c++;c=this.rect(m-c/2,p,c,e-p||1).attr("stroke",d);a=this.path("M"+m+" "+a+"L"+m+" "+p+"M"+m+" "+e+"L"+m+" "+b).attr("stroke",d);c.attr("fill",g?d:"#ffffff");d=this.set().push(c,a);if(f){m=Sai.util.getHoverfuncs(d,{scale:"1.5,1.5,"+m+","+(p+(e-p)/2),"fill-opacity":0.5},{scale:"1.0,1.0,"+m+","+(p+(e-p)/2),"fill-opacity":1},h);d.hover(m[0],m[1])}return d}}).call(this);(function(){}).call(this);(function(){Raphael.fn.sai.prim.line=function(m,p,e){var a,b,c,d;if(p==null)p="black";if(e==null)e=1;c=0;for(d=m.length;c<d;c++){a=m[c];if(a!=null)if(typeof b!="undefined"&&b!==null)b+="L"+a[0]+" "+a[1];else b="M"+a[0]+" "+a[1]}return this.path(b).attr({stroke:p,"stroke-width":e})};Raphael.fn.sai.prim.area=function(m,p,e,a){var b,c,d,g,f;if(p==null)p="black";if(e==null)e=1;if(m.length<2)return this.set();g=0;for(f=m.length;g<f;g++){c=m[g];if(c!=null)if(typeof d!="undefined"&&d!==null){d+="L"+c[0]+
" "+c[1];b+="L"+c[0]+" "+c[1]}else{d="M"+c[0]+" "+c[1];b="M"+c[0]+" "+c[1]}}for(m=f=a.length-1;f<=0?m<=0:m>=0;m+=-1){c=a[m][0];g=a[m][1];b+="L"+c+","+g}a=this.path(b).attr({fill:p,"stroke-width":0,"stroke-opacity":0,"fill-opacity":0.35});p=this.path(d).attr({stroke:p,"stroke-width":e});return this.set().push(a,p)}}).call(this);(function(){}).call(this);(function(){Raphael.fn.sai.prim.stackedBar=function(m,p,e,a,b,c,d){var g,f,j,h,i,l,k,o,q,n;if(b){i=l=a;o=0;for(q=m.length;o<q;o++){f=m[o];if(i<f[1])i=f[1];if(l>f[1])l=f[1]}q=i-l||1}e*=0.67;o=this.set();l=[a,a];i=function(r){return r<a?1:0};f=0;for(n=m.length;0<=n?f<n:f>n;0<=n?f+=1:f-=1)if(m[f]!=null&&m[f][1]!==a){h=i(m[f][1]);j=Math.abs(l[h]-m[f][1]);g=l[h]===a?1:0;k=m[f][1]-(h?0:j-g);l[h]=m[f][1];o.push(g=this.rect(m[f][0]-e/2,k,e,j-g).attr("fill",(p!=null?p[f]:void 0)||"#000000").attr("stroke",
(p!=null?p[f]:void 0)||"#000000"));if(b){j=Sai.util.getHoverfuncs(g,{"fill-opacity":"0.75"},{"fill-opacity":"1.0"},[function(r){return function(){typeof d[0]==="function"&&d[0]();return c({"(selected)":Sai.util.prettystr(r)+"%"},false)}}(100*(j/q)),d[1]]);g.hover(j[0],j[1])}}return o};Raphael.fn.sai.prim.groupedBar=function(m,p,e,a,b,c,d){var g,f,j,h,i,l;c=this.set();g=e/(m.length+1);h=(e-g)/2;j=0;for(i=m.length;0<=i?j<i:j>i;0<=i?j+=1:j-=1)if(((l=m[j])!=null?l[0]:void 0)!=null){e=Math.min(m[j][1],
a);f=Math.max(m[j][1],a)-e-0.5;c.push(this.rect(m[j][0]-h+j*g,e,g-1,f).attr("fill",(p!=null?p[j]:void 0)||"#000000").attr("stroke",(p!=null?p[j]:void 0)||"#000000"))}if(b){m=Sai.util.getHoverfuncs(c,{"fill-opacity":"0.75"},{"fill-opacity":"1.0"},d);c.hover(m[0],m[1])}return c}}).call(this);(function(){}).call(this);(function(){Sai.Plot=function(){function m(p,e,a,b,c,d,g,f){this.r=p;this.x=e;this.y=a;this.w=b;this.h=c;this.data=d;this.rawdata=g;this.opts=f!=null?f:{};this.setDenormalizedData();this.set=this.r.set()}m.prototype.setDenormalizedData=function(){var p,e,a,b,c,d,g,f,j,h;if(this.data instanceof Array){g=this.data;j=[];a=0;for(c=g.length;a<c;a++){p=g[a];j.push(this.denormalize(p))}return this.dndata=j}else{this.dndata!=null||(this.dndata={});a=[];for(e in this.data)a.push(this.dndata[e]=function(){f=
this.data[e];h=[];b=0;for(d=f.length;b<d;b++){p=f[b];h.push(this.denormalize(p))}return h}.call(this));return a}};m.prototype.denormalize=function(p){if(p instanceof Array)return[this.x+this.w*p[0],this.y-this.h*p[1]]};m.prototype.render=function(){this.set.push(this.r.rect(20,20,20,20).attr("fill","red"),this.r.circle(40,40,10).attr("fill","blue"));return this};return m}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.CandlestickPlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Plot);e.prototype.render=function(a,b,c,d){var g,f,j,h,i,l;if(b==null)b=5;this.set.remove();g=(a!=null?a.up:void 0)||"black";a=(a!=null?a.down:void 0)||"red";f=0;for(l=this.dndata.open.length;0<=
l?f<l:f>l;0<=l?f+=1:f-=1)if(this.dndata.close[f]!=null){i=this.dndata.close[f][1]<this.dndata.open[f][1];j={};for(h in this.rawdata)j[h]=this.rawdata[h][f];this.set.push(this.r.sai.prim.candlestick(this.dndata.open[f][0],i&&this.dndata.close[f][1]||this.dndata.open[f][1],i&&this.dndata.open[f][1]||this.dndata.close[f][1],this.dndata.high[f][1],this.dndata.low[f][1],b||5,f&&this.dndata.close[f-1]!=null&&this.dndata.close[f-1][1]<this.dndata.close[f][1]?a:g,!i,c,d,Sai.util.infoSetters(d,j)))}return this};
return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)if(m.call(b,d))a[d]=b[d];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},e=function(a,b){return function(){return a.apply(b,arguments)}};Sai.ScatterPlot=function(){function a(){a.__super__.constructor.apply(this,arguments)}p(a,Sai.Plot);a.prototype.render=function(b,c,d,g,f,j,h){var i,l,k,o,q,n,r,t,s,u,w,x,y,C,z,F,G,D,H,O,I,J,K,L,M,N,P,Q,A;this.set.remove();
for(s in this.dndata){r=this.dndata[s].length;break}n=function(v,B,E){return B*E+v*(1-E)};C=e(function(v){return this.x+this.w*((v-this.y)/-this.h)},this);z=function(v){x=C((F=this.dndata[b.x])!=null?F[v][1]:void 0);y=(J=this.dndata[b.y])!=null?J[v][1]:void 0;l=c instanceof Array&&b.color!=null?Sai.util.colerp(c[0],c[1],(K=(L=this.data[b.color])!=null?(M=L[v])!=null?M[1]:void 0:void 0)!=null?K:0):c instanceof Object&&b.color!=null?c[this.rawdata[b.color][v]]:"black";u=f instanceof Array&&b.stroke_color!=
null?Sai.util.colerp(f[0],f[1],(N=(P=this.data[b.stroke_color])!=null?(Q=P[v])!=null?Q[1]:void 0:void 0)!=null?N:0):c instanceof Object&&b.color!=null?f[this.rawdata[b.stroke_color][v]]:"black";t=d instanceof Array&&b.radius!=null?n(d[0],d[1],(A=(G=this.data[b.radius])!=null?(D=G[v])!=null?D[1]:void 0:void 0)!=null?A:0):d instanceof Object&&b.radius!=null?d[this.rawdata[b.radius][v]]:5;w=g instanceof Array&&b.stroke_opacity!=null?n(g[0],g[1],(H=(O=this.data[b.stroke_opacity])!=null?(I=O[v])!=null?
I[1]:void 0:void 0)!=null?H:0):g instanceof Object&&b.stroke_opacity!=null?g[this.rawdata[b.stroke_opacity][v]]:1;if(j){o={};for(s in this.rawdata)s.match("^__")||(o[s]=this.rawdata[s][v]);q=Sai.util.infoSetters(h,o)}return this.set.push(i=this.r.circle(x,y,t).attr({fill:l,"stroke-opacity":w,stroke:u,"fill-opacity":0.8,"stroke-width":2}),j?i.hover(function(B){return function(){B();return this.attr("fill-opacity",0.5)}}(q[0]),function(B){return function(){B();return this.attr("fill-opacity",0.8)}}(q[1])):
void 0)};for(k=0;0<=r?k<r:k>r;0<=r?k+=1:k-=1)z.call(this,k);return this};return a}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.LinePlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Plot);e.prototype.setDenormalizedData=function(){var a,b,c,d;e.__super__.setDenormalizedData.apply(this,arguments);d=[];for(a in this.dndata)d.push(this.dndata[a].length===1&&((b=this.dndata[a])!=
null?(c=b[0])!=null?c[0]:void 0:void 0)===this.x?this.dndata[a].push([this.x+this.w,this.dndata[a][0][1]]):void 0);return d};e.prototype.render=function(a,b){var c;this.set.remove();for(c in this.dndata)c.match("^__")||this.set.push(this.r.sai.prim.line(this.dndata[c],(a!=null?a[c]:void 0)||"black",b||1));return this};return e}();Sai.AreaPlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.LinePlot);e.prototype.render=function(a,b,c,d){var g,f,j,h,i,l,k;this.set.remove();
k=[];i=0;for(l=d.length;i<l;i++){f=d[i];k.push(this.denormalize(f))}d=k;for(h in this.dndata)if(!h.match("^__")){f=0;for(i=this.dndata[h].length;0<=i?f<i:f>i;0<=i?f+=1:f-=1){g=this.dndata[h][f];if(g!=null)break}for(f=i=this.dndata[h].length-1;i<=0?f<=0:f>=0;i<=0?f+=1:f-=1){j=this.dndata[h][f];if(j!=null)break}k=[];i=0;for(l=d.length;i<l;i++){f=d[i];k.push([Math.max(Math.min(j[0],f[0]),g[0]),f[1]])}f=k;this.set.push(this.r.sai.prim.area(this.dndata[h],(a!=null?a[h]:void 0)||"black",b||1,f));if(c)d=
this.dndata[h]}return this};return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.GeoPlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Plot);e.prototype.getRegionColor=function(a,b,c){var d;return Sai.util.multiplyColor(a[c],((d=this.data[c][b])!=null?d[1]:void 0)||0,this.opts.fromWhite,this.opts.fromWhite?0.2:0).str};e.prototype.getRegionOpacity=
function(a,b){var c;return((c=this.data[b][a])!=null?c[1]:void 0)!=null?1:this.opts.fromWhite?0.15:0.25};e.prototype.render=function(a,b,c,d,g,f,j){var h,i,l,k,o,q,n,r,t,s,u,w,x;this.set.remove();x=this.rawdata[c];u=[];l=0;for(w=x.length;l<w;l++){h=x[l];u.push(h.toUpperCase())}r={};l=0;for(w=u.length;0<=w?l<w:l>w;0<=w?l+=1:l-=1)r[u[l]]=l;u=function(y){t=r[y];q=b.name[y];k={region:q!=null?q:y};for(s in this.rawdata)if(s!==c)k[s]=this.rawdata[s][t];i=this.getRegionColor(a,t,d);n=this.getRegionOpacity(t,
d);o=Sai.util.infoSetters(j,k);return this.set.push(this.r.sai.prim.hoverShape(function(C,z,F,G){return function(D){return D.path(C).translate(F,G).scale(z,z,F,G)}}(b.paths[y],Math.min(this.w/b.width,this.h/b.height),this.x,this.y-this.h),{fill:i,stroke:this.opts.fromWhite?"black":g,"stroke-width":0.5,opacity:n},f?[function(C){return function(z){navigator.userAgent.toLowerCase().indexOf("msie")!==-1||navigator.userAgent.toLowerCase().indexOf("opera")!==-1||z.toFront();return C()}}(o[0]),o[1]]:null,
f?[{"fill-opacity":0.75,"stroke-width":this.opts.fromWhite?1.5:0.5},{"fill-opacity":1,"stroke-width":0.5}]:null))};for(h in b.paths)u.call(this,h);h=this.set.getBBox();this.set.translate((this.w-h.width)/2,(this.h-h.height)/2);return this};return e}();Sai.ChromaticGeoPlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.GeoPlot);e.prototype.getRegionColor=function(a,b){var c,d,g,f,j,h;g=d=c=0;for(j in this.data){f=Sai.util.multiplyColor(a[j],((h=this.data[j][b])!=null?
h[1]:void 0)||0,this.opts.fromWhite);g+=f.r;d+=f.g;c+=f.b}return"rgb("+g+", "+d+", "+c+")"};e.prototype.getRegionOpacity=function(a){var b,c;for(b in this.data)if(((c=this.data[b][a])!=null?c[1]:void 0)!=null)return 1;return 0.25};return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.BarPlot=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Plot);e.prototype.render=function(a,b,c,d,g,f){var j,h,i,l,k,o,q,n,r;this.set.remove();b=this.denormalize([0,b])[1];k=0;h=[];j=a?this.r.sai.prim.stackedBar:this.r.sai.prim.groupedBar;for(r in this.dndata){k=
Math.max(k,this.dndata[r].length);h.push((c!=null?c[r]:void 0)||"black")}for(i=0;0<=k?i<k:i>k;0<=k?i+=1:i-=1){c=[];for(r in this.dndata)c.push(this.dndata[r][i]);l={};for(n in this.rawdata)l[n]=this.rawdata[n][i];if(a){q=o=0;for(r in this.rawdata)if(r!==f)if(!isNaN(this.rawdata[r][i])){o+=Math.abs(this.rawdata[r][i]);q+=this.rawdata[r][i]}l["(magnitude)"]=o}this.set.push(j(c,h,this.w/k,b,d,g,Sai.util.infoSetters(g,l)))}return this};return e}()}).call(this);(function(){}).call(this);(function(){var m=function(e,a){return function(){return e.apply(a,arguments)}},p=Array.prototype.indexOf||function(e){for(var a=0,b=this.length;a<b;a++)if(this[a]===e)return a;return-1};Sai.Chart=function(){function e(a,b,c,d,g,f,j,h){var i;this.r=a;this.x=b;this.y=c;this.w=d;this.h=g;this.__LABELS__=j;this.opts=h!=null?h:{};this.drawInfo=m(this.drawInfo,this);(i=this.opts).bgcolor!=null||(i.bgcolor="white");this.setData(f);a=this.opts.simple?0:5;this.padding={left:a,right:a,top:a,bottom:a}}e.prototype.groupsToNullPad=
function(){return[]};e.prototype.nonNegativeGroups=function(){return[]};e.prototype.nextSeriesSuffix=function(){var a;this.suffixCtr=((a=this.suffixCtr)!=null?a:0)+1;return"["+this.suffixCtr+"]"};e.prototype.fixSeriesName=function(a){return a+(a.match(/^\s+$/)?this.nextSeriesSuffix():"")};e.prototype.setSemanticRename=function(a){var b,c;if(this.semanticRenamePatterns!=null){this.semanticRenames!=null||(this.semanticRenames={});c=[];for(b in this.semanticRenamePatterns)c.push(a.match(this.semanticRenamePatterns[b])?
this.semanticRenames[b]=a:void 0);return c}};e.prototype.getBaseline=function(a){a=this.normalizedHeight(0,a!=null?a:"all");return[[0,a],[1,a]]};e.prototype.setData=function(a){var b,c,d,g,f,j,h,i,l;this.data={};this.renames={};if(function(q){var n;for(n in q)if(q.hasOwnProperty(n))return false;return true}(a))this.render=function(){return this.showError("(no data -> empty chart)")};else{for(g in a){for(;;){f=this.fixSeriesName(g);this.setSemanticRename(f);if(f===g||!(f in a))break}this.renames[g]=
f;if(a[g]instanceof Array)if(this.__LABELS__===g){this.__LABELS__=f;var k=this.data,o=f;i=a[g];l=[];j=0;for(h=i.length;j<h;j++){b=i[j];l.push(String(b))}k[o]=l}else{k=this.data;o=f;i=a[g];l=[];j=0;for(h=i.length;j<h;j++){b=i[j];l.push(typeof b==="string"&&b.match(/^( +)?[+-]?[\d,]+(\.\d+)?( +)?$/)&&!isNaN(d=parseFloat(b.replace(/,/g,"")))?d:b)}k[o]=l}else this.data[f]=a[g]}a=this.dataGroups(this.data);d=this.nonNegativeGroups();for(c in a)if(a[c].length>0)if(p.call(d,c)>=0){h=a[c];f=0;for(j=h.length;f<
j;f++){g=h[f];if(this.data[g]!=null){b=0;for(i=this.data[g].length;0<=i?b<i:b>i;0<=i?b+=1:b-=1)if(this.data[g][b]<0)this.data[g][b]*=-1}}}f=this.groupsToNullPad();b=0;for(d=f.length;b<d;b++){c=f[b];if(c in a){h=a[c];j=0;for(c=h.length;j<c;j++){g=h[j];this.nullPad(g)}}}return this.normalize(this.data)}};e.prototype.nullPad=function(a){if(a in this.data)return this.data[a]=[null].concat(this.data[a].concat([null]))};e.prototype.caresAbout=function(a){return!(a.match("^__")||a===this.__LABELS__)};e.prototype.dataGroups=
function(a){var b,c,d;c=[];for(b in a)this.caresAbout(b)&&c.push(b);d=[];for(b in a)if(b.match("^__")||b===this.__LABELS__)d.push(b);return{all:c,__META__:d}};e.prototype.getYAxisVals=function(a,b,c){var d,g,f;if(c==null)c=false;if(!(typeof a==="number"&&typeof b==="number"))return[a,b];if(a===b)return[0,b,b*2];for(g=1;(b-a)*g<10;)g*=10;a*=g;b*=g;f=Math.floor(d=Math.log(b-a)/Math.LN10-0.4);f=Math.pow(10,f);if(d%1>0.7&&!c)f*=4;else if(d%1>0.35&&!c)f*=2;d=Sai.util.round(a-(c?f/2.1:f/1.75),f);if(d<0&&
0<=a)d=0;a=Sai.util.round(b+(c?f/2.1:f/1.75),f);d/=g;a/=g;f/=g;g=d;for(b=[g];g<a;){g=Sai.util.round(g+f,f);b.push(g)}return b};e.prototype.getMax=function(a,b){var c,d,g,f,j,h,i,l,k;return Math.max.apply(Math,function(){l=[];g=0;for(j=b.length;g<j;g++){d=b[g];a[d]!=null&&l.push(Math.max.apply(Math,function(){i=a[d];k=[];f=0;for(h=i.length;f<h;f++){c=i[f];c!=null&&typeof c==="number"&&k.push(c)}return k}()))}return l}())};e.prototype.getMin=function(a,b){var c,d,g,f,j,h,i,l,k;return Math.min.apply(Math,
function(){l=[];g=0;for(j=b.length;g<j;g++){d=b[g];a[d]!=null&&l.push(Math.min.apply(Math,function(){i=a[d];k=[];f=0;for(h=i.length;f<h;f++){c=i[f];c!=null&&typeof c==="number"&&k.push(c)}return k}()))}return l}())};e.prototype.getStackedMax=function(a,b){var c,d,g,f,j,h,i,l;this.stackedMax!=null||(this.stackedMax={});this.stackedMax[b]=(j=this.stackedMax[b])!=null?j:Math.max.apply(Math,function(){i=[];c=0;for(h=a[this.__LABELS__].length;0<=h?c<h:c>h;0<=h?c+=1:c-=1)i.push(Sai.util.sumArray(function(){l=
[];g=0;for(f=b.length;g<f;g++){d=b[g];d!==this.__LABELS__&&a[d][c]>=0&&l.push(a[d][c])}return l}.call(this)));return i}.call(this));return this.stackedMax[b]};e.prototype.getStackedMin=function(a,b){var c,d,g,f,j,h,i,l;this.stackedMin!=null||(this.stackedMin={});this.stackedMin[b]=(j=this.stackedMin[b])!=null?j:Math.min.apply(Math,function(){i=[];c=0;for(h=a[this.__LABELS__].length;0<=h?c<h:c>h;0<=h?c+=1:c-=1)i.push(Sai.util.sumArray(function(){l=[];g=0;for(f=b.length;g<f;g++){d=b[g];d!==this.__LABELS__&&
a[d][c]<0&&l.push(a[d][c])}return l}.call(this)));return i}.call(this));return this.stackedMin[b]};e.prototype.normalize=function(a){var b,c,d,g,f,j,h,i,l,k,o,q,n,r,t,s,u,w,x,y,C,z,F,G,D,H,O,I,J,K,L,M,N;h=this.dataGroups(a);this.ndata={};if(this.opts.stacked!=null)this.stackedNdata={};n=function(A,v,B){if(typeof A==="number")return v===B?1:(A-v)/(B-v);return null};b=function(A,v){var B,E,R;E=0;for(R=v.length;E<R;E++){B=v[E];if(!A(B))return false}return true};f=function(A){var v,B,E;B=0;for(E=A.length;B<
E;B++){v=A[B];if(typeof v==="number")return false}return true};I=[];for(j in h){if(!(k=j.match("^__"))){if(!(k=Sai.util.sumArray(function(){z=h[j];J=[];w=0;for(y=z.length;w<y;w++){s=z[w];J.push(this.data[s].length)}return J}.call(this))===0)){var P=b,Q=f;F=h[j];K=[];k=0;for(q=F.length;k<q;k++){s=F[k];K.push(this.data[s])}k=P(Q,K)}k=k}if(!k){this.ndata[j]={};if(this.opts.stacked!=null){this.stackedNdata[j]={};d={}}q=this.opts.stacked?m(function(A,v){return this.getStackedMin(A,v)},this):this.getMin;
k=this.opts.stacked?m(function(A,v){return this.getStackedMax(A,v)},this):this.getMax;o=q(a,h[j]);l=k(a,h[j]);k=this.getYAxisVals(o,l);o=k[0];l=k[k.length-1];this.ndata[j].__YVALS__=k;I.push(function(){G=h[j];L=[];x=0;for(C=G.length;x<C;x++){s=G[x];if(a[s]!=null){var A=this.ndata[j],v=s;M=[];i=0;for(D=a[s].length;0<=D?i<D:i>D;0<=D?i+=1:i-=1)M.push(a[s][i]!=null&&(t=n(a[s][i],o,l))!==null?[i/(a[s].length-1||1),t]:null);A[v]=M;L.push(function(){if(this.opts.stacked!=null){r=n(0,o,l);this.stackedNdata[j][s]=
[];N=[];i=0;for(H=a[s].length;0<=H?i<H:i>H;0<=H?i+=1:i-=1){g=a[s][i]!=null&&a[s][i]<0?0:1;d[i]!=null||(d[i]=[r,r]);c=d[i][g];u=[i/(a[s].length-1||1),((O=n(a[s][i],o,l))!=null?O:r)-r+c];this.stackedNdata[j][s].push(u);N.push(u!==null?d[i][g]=u[1]:void 0)}return N}}.call(this))}}return L}.call(this))}}return I};e.prototype.addAxes=function(a,b){var c,d,g,f,j,h,i,l,k,o,q,n,r;this.axisWidth=1.5;this.padding.top+=5;for(d=c=this.data[this.__LABELS__].length-1;c<=0?d<=0:d>=0;c<=0?d+=1:d-=1)if(this.data[this.__LABELS__][d]!=
null){d=this.r.text(0,0,Sai.util.prettystr(this.data[this.__LABELS__][d]));this.padding.right+=d.getBBox().width/2;d.remove();break}h=this.h-(this.padding.bottom+this.padding.top);c=this.ndata[a[0]]!=null||this.ndata[a[1]]==null;d=this.ndata[a[1]]!=null;if(c){r=this.r.sai.prim.vaxis((f=(l=this.ndata[a[0]])!=null?l.__YVALS__:void 0)!=null?f:[0,"?"],this.x+this.padding.left,this.y-this.padding.bottom,h,{width:this.axisWidth,title:b!=null?b.left:void 0});f=r.items[0].getBBox().width;r.remove()}else f=
0;if(d){r=this.r.sai.prim.vaxis((g=(k=this.ndata[a[1]])!=null?k.__YVALS__:void 0)!=null?g:[0,"?"],this.x+this.padding.left,this.y-this.padding.bottom,h,{width:this.axisWidth,title:b!=null?b.right:void 0});g=r.getBBox().width;r.remove()}else g=0;this.haxis=this.r.sai.prim.haxis(this.data[this.__LABELS__],this.x+this.padding.left+f,this.y-this.padding.bottom,this.w-this.padding.left-this.padding.right-f-g,{width:this.axisWidth,title:b!=null?b.bottom:void 0});g=this.haxis.getBBox().height;if(isNaN(g))g=
1;this.haxis.translate(0,-g);this.padding.bottom+=g;h=this.h-(this.padding.bottom+this.padding.top);if(c){this.vaxis=this.r.sai.prim.vaxis((j=(o=this.ndata[a[0]])!=null?o.__YVALS__:void 0)!=null?j:[0,"?"],this.x+this.padding.left,this.y-this.padding.bottom,h,{width:this.axisWidth,title:b!=null?b.left:void 0});j=this.vaxis.items[0].getBBox().width;this.vaxis.translate(j,0);this.padding.left+=j}if(d){this.vaxis_right=this.r.sai.prim.vaxis((q=(n=this.ndata[a[1]])!=null?n.__YVALS__:void 0)!=null?q:[0,
"?"],this.w-this.padding.right,this.y-this.padding.bottom,h,{width:this.axisWidth,right:true,title:b!=null?b.right:void 0,color:this.ndata[a[0]]!=null?(i=this.colors.__RIGHTAXIS__)!=null?i:"blue":"black"});i=this.vaxis_right.items[0].getBBox().width;this.vaxis_right.translate(-i,0);this.padding.right+=i}this.setPlotCoords();return this.r.set().push(this.haxis).push(this.vaxis)};e.prototype.setPlotCoords=function(){var a,b,c,d;this.px=this.x+this.padding.left;this.py=this.y-this.padding.bottom;this.pw=
this.w-this.padding.left-this.padding.right;this.ph=this.h-this.padding.bottom-this.padding.top;a=(b=this.legend)!=null?b.getBBox():void 0;if((b=this.legend)!=null)b.translate(this.px+this.pw/2-(a.x+a.width/2),0);a=(c=this.histogramLegend)!=null?c.getBBox():void 0;return(d=this.histogramLegend)!=null?d.translate(this.px+this.pw/2-(a.x+a.width/2),0):void 0};e.prototype.drawBG=function(){return this.bg=this.r.rect(this.px!=null&&this.px||this.x,this.py!=null&&this.py-this.ph||this.y-this.h,this.pw!=
null&&this.pw||this.w,this.ph!=null&&this.ph||this.h).attr({fill:this.opts.bgcolor,"stroke-width":0,"stroke-opacity":0}).toBack()};e.prototype.logoPos=function(){return[this.px!=null&&this.pw!=null?this.px+this.pw-150-5:this.w+this.x-150-this.padding.right,this.py!=null&&this.ph!=null?this.py-this.ph+5:this.y-this.h+this.padding.top,150,28]};e.prototype.drawLogo=function(){var a,b,c,d,g,f,j;if(!this.opts.simple){a=this.logoPos();g=a[0];f=a[1];d=a[2];a=a[3];b=[328.3,53.06];c=[d/344,a/65];g+=b[0]*c[0];
f+=b[1]*c[1];return this.logo=this.r.path("M"+g+","+f+"h1.9v1.6c0.5-0.5,0.9-0.9,1.3-1.2,0.6-0.4,1.4-0.7,2.2-0.7,0.9,0,1.6,0.3,2.2,0.7,0.3,0.3,0.6,0.7,0.9,1.2,0.4-0.7,0.9-1.1,1.5-1.4,0.6-0.3,1.2-0.5,2-0.5,1.5,0,2.6,0.6,3.1,1.7,0.3,0.6,0.5,1.4,0.5,2.5v7.7h-2v-8.1c0-0.7-0.2-1.3-0.6-1.6-0.4-0.2-0.9-0.4-1.4-0.4-0.8,0-1.4,0.3-2,0.8-0.5,0.5-0.8,1.3-0.8,2.5v6.8h-2v-7.6c0-0.8-0.1-1.3-0.3-1.7-0.3-0.5-0.8-0.8-1.6-0.8-0.8,0-1.4,0.3-2,0.8-0.6,0.6-0.9,1.6-0.9,3.1v6.2h-2v-11.6zm-3.9,1.1c1,1,1.5,2.5,1.5,4.4,0,1.9-0.4,3.4-1.3,4.7-0.9,1.2-2.3,1.8-4.2,1.8-1.6,0-2.9-0.6-3.8-1.6-0.9-1.1-1.4-2.6-1.4-4.4,0-1.9,0.5-3.5,1.5-4.6,1-1.2,2.3-1.7,3.9-1.7,1.5,0,2.8,0.5,3.8,1.4zm-1.2,7.7c0.5-0.9,0.7-2,0.7-3.2,0-1.1-0.2-2-0.5-2.6-0.6-1.1-1.5-1.6-2.8-1.6-1.2,0-2,0.4-2.6,1.3-0.5,0.9-0.8,2-0.8,3.3,0,1.2,0.3,2.2,0.8,3.1,0.6,0.8,1.4,1.2,2.6,1.2,1.2,0,2.1-0.5,2.6-1.5zm-10.6-8.2c0.8,0.6,1.3,1.7,1.5,3.3h-1.9c-0.1-0.7-0.4-1.3-0.8-1.8-0.4-0.5-1.1-0.7-2-0.7-1.2,0-2.1,0.6-2.6,1.8-0.4,0.8-0.6,1.8-0.6,2.9,0,1.2,0.3,2.1,0.8,2.9,0.5,0.8,1.2,1.2,2.3,1.2,0.8,0,1.4-0.2,1.9-0.7,0.5-0.5,0.8-1.2,1-2h1.9c-0.2,1.5-0.8,2.6-1.7,3.3-0.8,0.7-1.9,1.1-3.3,1.1-1.5,0-2.7-0.6-3.6-1.7-0.9-1.1-1.3-2.4-1.3-4.1,0-2,0.5-3.6,1.4-4.7,1-1.2,2.3-1.7,3.8-1.7,1.3,0,2.4,0.3,3.2,0.9zm-13.3,8.6h2.2v2.4h-2.2v-2.4zm-181-15.8-6,12.9h-7.6c-0.9-0.4-4.5-6-5.3-7.2-3.3-4.5-6.8-8.9-10.1-13.5-1.2-1.7-2.8-3.2-4-5.1h-8.9v-2.8h17.7c3.4,0,7.2,0.3,9.6-0.8,2.2-0.9,3.9-2.5,5.2-4.3,1.1-1.7,2.8-4.6,2.1-8-1.2-4.9-4-7.791-8.5-9.251-2.6-0.81-9.8-0.61-9.8-0.61h-21v56.361h4.7v-26h6.5c6.4,8.6,12.9,17.3,19.3,26h12.9l6.5-13.1h34.5l6.4,13.1h5.4l-8.6-17.7h-41zm-41.9-34.10h17.7c4.5,0,7.8-0.1,10,2.1,1.1,1.1,2.8,3.2,2.1,5.9-0.5,2.2-1.9,4-3.9,4.8-2,0.9-5.8,0.7-8.4,0.7h-17.5v-13.50zm61.1-4.751-17.4,36.051h37.5l-17.4-36.051h-2.7zm-9.9,31.251,11-22.9,11.4,22.9h-22.4zm-127.60-26.500h25.800v51.8h4.7v-56.361h-30.500v4.561zm276.70-12.341-35.6,29.741v-29.741h-4.8v39.441l48-39.441h-7.6zm19.4,0h-7.4l-32.3,26.941,32.3,37.2h6.2l-31.6-36.400,32.8-27.741zm-163.3,0-25.1,50.841-5.9-7.8-3.4-4.5v-0.4c9.7,0,16-4.9,18.8-11.6,4.8-11.3-2.7-21.961-10.4-25.211-3.4-1.44-8-1.33-12.9-1.33h-20.3h-73.600v4.74h64.100v2.97l-30.7,0.1v56.331h4.7v-51.8h26v51.8h4.7v-59.401h22.8c4,0,8.8-0.46,12,0.57,3.4,1.12,5.9,3.35,7.7,6.031,1.7,2.6,3.5,7.2,2.1,11.6-0.7,2.3-1.9,4.2-3.2,5.9-1.3,1.7-4.4,3.4-6.6,4.2-1,0.3-3.1,0.5-3.1,0.5h-11.5c5.6,7.7,11.3,15.3,17,23h4.4c0.6-0.4,25-50.151,25.4-51.801h6.1l29.2,59.401h5.1l-31.3-64.141h-12.1zm103.5,43.641v20.5h4.8v-18.2l12.5-10.5,25,28.7h6.3l-30.6-35.1-18,14.6zm-7.7-28.3c-6.1-9.141-17.1-15.251-29.6-15.251-19.2,0-34.8,14.351-34.8,32.151,0,17.7,15.6,32.1,34.8,32.1,10.5,0,22.4-4.1,29.7-10.8v10.6h4.8v-19c-1.7,0.8-3.3,1.8-4.9,2.8v0.1c-10.9,7.1-19.4,11.2-29.9,11.3-16.4,0-29.6-12.2-29.6-27.2,0-15.1,13.2-27.311,29.6-27.311,11.5,0,21.5,6.011,26.4,14.811,0,0,2.2-1.4,3.5-2.2v20.8c-1.3,0.9-4.5,3.3-4.6,3.4-8.2,5.4-17.9,10.3-25.5,10.4-12,0-21.7-9-21.7-19.9,0-11,9.7-19.9,21.7-19.9,8.4,0,15.7,4.4,19.3,10.8l0.1,0.1c0.2,0.2,0.5,0.2,0.7,0.1,0,0,0.1-0.1,0.1-0.1,0.1-0.1,0.9-0.6,1.7-1,0.4-0.3,0.8-0.5,1.1-0.7,0.1,0,0.2-0.1,0.3-0.2h0.1l0.1-0.1c0.2-0.1,0.3-0.5,0.1-0.7-4.5-7.8-13.3-12.971-23.4-12.971-14.8,0-26.7,11.071-26.7,24.771,0,13.7,11.9,24.7,26.7,24.7,9.6,0,25.4-8.1,29.9-12.2,1.6-1.1,3.1-2.4,4.9-3.2v-41.561h-4.9v15.361z").hide().attr({fill:(j=
this.opts.logoColor)!=null?j:"#AA5128","stroke-width":0,"stroke-opacity":0,opacity:0.25,cx:g+d/2,cy:f-a/2}).scale(c[0],c[1],g,f).show()}};e.prototype.drawFootnote=function(a){var b;a!=null||(a=(b=this.opts.footnote)!=null?b:"");if(!a.match(/^\s*$/)){this.footnote=this.r.sai.prim.wrappedText(this.x+this.padding.left,this.y-this.padding.bottom,this.w,a," ");a=this.footnote.getBBox().height;this.padding.bottom+=a+10;return this.footnote.translate(0,-a)}};e.prototype.render=function(){this.opts.simple&&
this.renderPlots!=null?this.renderPlots():this.renderFull();return this};e.prototype.renderFull=function(){this.plot!=null||(this.plot=new Sai.Plot(this.r));this.plot.render();return this};e.prototype.showError=function(a){var b,c;return this.r.text(this.x+this.padding.left+((b=this.pw)!=null?b:this.w)/2,this.y-this.padding.bottom-((c=this.ph)!=null?c:this.h)/2,a)};e.prototype.setColors=function(a){var b,c;this.colors!=null||(this.colors={});for(b in a){c=this.renames[b];if(c in this.data)this.colors[c]=
a[b]}return this};e.prototype.setColor=function(a,b){this.colors!=null||(this.colors={});this.colors[this.renames[a]]=b;return this};e.prototype.normalizedHeight=function(a,b){var c,d;if(((c=this.ndata[b])!=null?c.__YVALS__:void 0)!=null){d=this.ndata[b].__YVALS__[0];c=this.ndata[b].__YVALS__[this.ndata[b].__YVALS__.length-1];if(a<d)a=d;else if(a>c)a=c;return(a-d)/(c-d)}};e.prototype.drawGuideline=function(a,b){var c;if(b==null)b="all";if(((c=this.ndata[b])!=null?c.__YVALS__:void 0)!=null){c=this.normalizedHeight(a,
b);this.guidelines!=null||(this.guidelines=this.r.set());c=new Sai.LinePlot(this.r,this.px,this.py,this.pw,this.ph,{guideline:[[0,c],[1,c]]});c.render({guideline:"#ccc"});return this.guidelines.push(c.set)}};e.prototype.drawLegend=function(a){var b,c,d,g,f;a!=null||(a=this.colors);if(a){c={};d={};for(b in a)if(b!==this.__LABELS__){c[b]=a[b];d[b]="black";if(((g=this.opts.groups)!=null?g.right:void 0)!=null)if(p.call(this.opts.groups.right,b)>=0)d[b]=this.ndata.left!=null?(f=this.colors.__RIGHTAXIS__)!=
null?f:"blue":"black"}this.legend=this.r.sai.prim.legend(this.x,this.y-this.padding.bottom,this.w,c,d);a=this.legend.getBBox();if(this.legend.length>0)this.padding.bottom+=a.height+15;return this.legend.translate((this.w-a.width)/2,0)}};e.prototype.drawTitle=function(){if(this.opts.title!=null){this.title=this.r.text(this.x+this.w/2,this.y-this.h,this.opts.title).attr({"font-size":20});this.title.translate(0,this.title.getBBox().height/2);return this.padding.top+=this.title.getBBox().height+5}};e.prototype.setupInfoSpace=
function(){this.info_y=this.y-this.h+this.padding.top;this.info_x=this.x+this.padding.left;this.info_w=this.w-this.padding.left-this.padding.right;return this.padding.top+=30};e.prototype.drawInfo=function(a,b){var c,d;if(b==null)b=true;a!=null||(a=this.default_info!=null?this.default_info():{});if(b)this.info_data={};this.info&&this.info.remove();for(c in a)c.match("^__")||(this.info_data[c]=(d=a[c])!=null?d:"(no data)");return this.info=this.r.sai.prim.info(this.info_x,this.info_y,this.info_w,this.info_data)};
e.prototype.getIndex=function(a){a=Sai.util.transformCoords(a,this.r.canvas).x;return Math.round((this.data[this.__LABELS__].length-1)*(a-this.px)/this.pw)};e.prototype.drawHistogramLegend=function(a,b){var c,d,g,f,j,h,i,l,k,o,q,n;b!=null||(b=this.colors);this.histogramLegend=this.r.set();f=Math.max(0.1*(this.h-this.padding.bottom-this.padding.top),50);l=Math.min(150,(this.w-this.padding.left-this.padding.right-20)/a.length);j=0;for(k=a.length;0<=k?j<k:j>k;0<=k?j+=1:j-=1){i=a[j];c=[];d=0;for(g=this.ndata[i][i].length;0<=
g?d<g:d>g;0<=g?d+=1:d-=1)this.ndata[i][i][d]!=null&&c.push(this.ndata[i][i][d][1]);d=c;if(((o=this.bounds)!=null?o[i]:void 0)!=null){c=this.bounds[i];g=c[0];c=c[1]}else{q=this.data[i];n=[];c=0;for(h=q.length;c<h;c++){g=q[c];g!=null&&n.push(g)}g=n;c=[Math.min.apply(Math,g),Math.max.apply(Math,g)];g=c[0];c=c[1]}c=this.getYAxisVals(g,c,true);g=c[0];h=c[c.length-1];c=b[i];this.histogramLegend.push(d=this.r.sai.prim.histogram(this.x+j*l,this.y-this.padding.bottom,l*0.8,f,d,g,h,i,typeof c==="object"?[c.__LOW__,
c.__HIGH__]:[c],"white",this.opts.fromWhite));this.opts.interactive&&this.setupHistogramInteraction(d,i)}this.histogramLegend.translate((this.w-this.padding.left-this.padding.right-this.histogramLegend.getBBox().width)/2,0);return this.padding.bottom+=f+5};e.prototype.setupHistogramInteraction=function(){return null};return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)if(m.call(b,d))a[d]=b[d];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},e=function(a,b){return function(){return a.apply(b,arguments)}};Sai.StockChart=function(){function a(){a.__super__.constructor.apply(this,arguments)}p(a,Sai.Chart);a.prototype.semanticRenamePatterns={open:/^open$/i,close:/^close$/i,high:/^high$/i,low:/^low$/i,volume:/^vol(ume)?$/i};a.prototype.groupsToNullPad=
function(){return["prices","volume","__META__"]};a.prototype.dataGroups=function(b){var c,d,g,f;c={__META__:[this.__LABELS__]};g=(f=this.semanticRenames.volume)!=null?f:"volume";if(g in this.data)c.volume=[g];for(d in b)if(this.caresAbout(d)&&d!==this.__LABELS__&&d!==g){c.prices!=null||(c.prices=[]);c.prices.push(d)}return c};a.prototype.nonNegativeGroups=function(){return["volume"]};a.prototype.renderPlots=function(){var b,c,d,g,f,j,h,i,l,k,o,q;this.px==null&&this.setPlotCoords();f=(c=this.semanticRenames.open)!=
null?c:"open";c=(d=this.semanticRenames.close)!=null?d:"close";d=(g=this.semanticRenames.high)!=null?g:"high";g=(l=this.semanticRenames.low)!=null?l:"low";l=(q=this.semanticRenames.volume)!=null?q:"volume";this.colors!=null||(this.colors={});(j=this.colors).up!=null||(j.up="black");(i=this.colors).down!=null||(i.down="red");(k=this.colors).vol_up!=null||(k.vol_up="#666666");(o=this.colors).vol_down!=null||(o.vol_down="#cc6666");this.drawLogo();this.drawBG();if(this.ndata.prices!=null&&f in this.ndata.prices&&
c in this.ndata.prices&&d in this.ndata.prices&&g in this.ndata.prices){this.ndata.prices.__YVALS__[0]<0&&this.drawGuideline(0,"prices");this.plots=this.r.set();i={up:[],down:[]};j={};for(b in this.ndata.prices)b.match("^__")||b===this.__LABELS__||(j[b]=this.data[b]);if(this.data[l]!=null)j.vol=this.data[l];if("volume"in this.ndata){b=0;for(k=this.ndata.volume[l].length;0<=k?b<k:b>k;0<=k?b+=1:b-=1)if(this.ndata.volume[l][b]!==null)if(b&&this.ndata.prices[c][b-1]&&this.ndata.prices[c][b][1]<this.ndata.prices[c][b-
1][1]){i.down.push(this.ndata.volume[l][b]);i.up.push([this.ndata.volume[l][b][0],0])}else{i.up.push(this.ndata.volume[l][b]);i.down.push([this.ndata.volume[l][b][0],0])}else{i.up.push([0,0]);i.down.push([0,0])}this.plots.push((new Sai.BarPlot(this.r,this.px,this.py,this.pw,this.ph*0.2,i,j)).render(true,this.normalizedHeight(0,"volume"),{up:this.colors.vol_up,down:this.colors.vol_down}).set)}this.plots.push((new Sai.CandlestickPlot(this.r,this.px,this.py,this.pw,this.ph,{open:this.ndata.prices[f],
close:this.ndata.prices[c],high:this.ndata.prices[d],low:this.ndata.prices[g]},j)).render(this.colors,Math.min(5,this.pw/this.ndata.prices[f].length-2)).set);b={};for(h in this.ndata.prices)h===f||h===c||h===d||h===g||h.match("^__")||h===this.__LABELS__||(b[h]=this.ndata.prices[h]);return this.plots.push((new Sai.LinePlot(this.r,this.px,this.py,this.pw,this.ph,b)).render(this.colors).set)}else this.showError("This chart requires data series named\nopen, close, high, and low.\n \nOnce you add series with these names, the chart will display.")};
a.prototype.renderFull=function(){var b,c,d,g,f,j,h,i,l,k;this.drawTitle();this.setupInfoSpace();this.drawFootnote();j=(c=this.semanticRenames.open)!=null?c:"open";c=(g=this.semanticRenames.close)!=null?g:"close";g=(f=this.semanticRenames.high)!=null?f:"high";f=(b=this.semanticRenames.low)!=null?b:"low";l=(i=this.semanticRenames.volume)!=null?i:"volume";b={};i=false;for(h in this.ndata.prices)if(h!==j&&h!==c&&h!==g&&h!==f&&!(h.match("^__")||h===this.__LABELS__)){b[h]=((k=this.colors)!=null?k[h]:void 0)||
"black";i=true}i&&this.drawLegend(b);this.addAxes(["prices"]);this.renderPlots();d=this.pw/(this.data[this.__LABELS__].length-1);this.glow=this.r.rect(this.px-d/2,this.py-this.ph,d,this.ph).attr({fill:"0-"+this.opts.bgcolor+"-#DDAA99-"+this.opts.bgcolor,"stroke-width":0,"stroke-opacity":0}).toBack().hide();this.bg.toBack();this.r.set().push(this.bg,this.plots,this.logo,this.glow,this.guidelines).mousemove(e(function(o){var q,n,r,t,s;o=this.getIndex(o);q={};if(this.data[this.__LABELS__][o]!=null)q[this.__LABELS__]=
this.data[this.__LABELS__][o];n=false;for(r in this.ndata.prices)if(!(r.match("^__")||r===this.__LABELS__))if(((t=this.data[r])!=null?t[o]:void 0)!=null){q[r]=this.data[r][o];n=true}if(((s=this.data[l])!=null?s[o]:void 0)!=null){q[l]=this.data[l][o];n=true}this.drawInfo(q);if(n)return this.glow.attr({x:this.px+d*(o-0.5)}).show()},this)).mouseout(e(function(){this.drawInfo({},true);return this.glow.hide()},this));return this};return a}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.ScatterChart=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Chart);e.prototype.dataGroups=function(a){var b,c;b=[];for(c in a)if(c.match("^__")||c===this.__LABELS__)b.push(c);b={__META__:b};for(c in a)c.match("^__")||c===this.__LABELS__||(b[c]=[c]);return b};
e.prototype.renderPlots=function(){var a,b,c,d,g,f,j;this.px==null&&this.setPlotCoords();a=(f=(j=this.opts.colors)!=null?j:this.colors)!=null?f:["black","white"];f=(g=this.opts.stroke_opacity)!=null?g:[0,1];g=(c=this.opts.stroke_colors)!=null?c:["black","black"];c=(b=this.opts.radius)!=null?b:[4,12];this.drawLogo();this.drawBG();b={};for(d in this.ndata)b[d]=this.ndata[d][d];this.plots=this.r.set();this.plots.push((new Sai.ScatterPlot(this.r,this.px,this.py,this.pw,this.ph,b,this.data)).render(this.opts.mappings,
a,c,f,g,this.opts.interactive&&!this.opts.simple,this.drawInfo).set);return this};e.prototype.renderFull=function(){var a,b,c,d,g,f;this.drawTitle();this.setupInfoSpace();this.drawFootnote();b=(f=(g=this.opts.colors)!=null?g:this.colors)!=null?f:["black","white"];f=(d=this.opts.stroke_colors)!=null?d:["black","black"];g=[];d={};if(b instanceof Array){g.push(this.opts.mappings.color);d[this.opts.mappings.color]={__LOW__:b[0],__HIGH__:b[1]}}else{typeof legend_colors!="undefined"&&legend_colors!==null||
(legend_colors={});c=true;for(a in b)legend_colors[a]=b[a]}if(!(f instanceof Array)){typeof legend_colors!="undefined"&&legend_colors!==null||(legend_colors={});c=true;for(a in b)legend_colors[a]=f[a]}g.length&&this.drawHistogramLegend(g,d);c&&this.drawLegend(b);this.__LABELS__="__XVALS__";this.data.__XVALS__=this.ndata[this.opts.mappings.x].__YVALS__;this.addAxes([this.opts.mappings.y],{left:this.opts.mappings.y,bottom:this.opts.mappings.x});this.renderPlots();a=this.r.set().push(this.plots,this.bg,
this.logo,this.info,this.footnote,this.histogramLegend,this.legend);this.opts.href&&a.attr({href:this.opts.href,target:"_blank"});return this};return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)if(m.call(b,d))a[d]=b[d];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},e=function(a,b){return function(){return a.apply(b,arguments)}};Sai.LineChart=function(){function a(){a.__super__.constructor.apply(this,arguments)}p(a,Sai.Chart);a.prototype.nonNegativeGroups=function(){return this.opts.stacked?["all","left","right"]:[]};a.prototype.dataGroups=function(){var b,
c,d,g,f,j;b=a.__super__.dataGroups.apply(this,arguments);if(((c=this.opts.groups)!=null?c.left:void 0)!=null&&((d=this.opts.groups)!=null?d.right:void 0)!=null){f=this.opts.groups.left;j=[];d=0;for(g=f.length;d<g;d++){c=f[d];this.caresAbout(c)&&c in this.data&&j.push(c)}b.left=j;f=this.opts.groups.right;j=[];d=0;for(g=f.length;d<g;d++){c=f[d];this.caresAbout(c)&&c in this.data&&j.push(c)}b.right=j}return b};a.prototype.renderPlots=function(){var b,c,d,g,f,j,h,i;this.px==null&&this.setPlotCoords();
this.drawBG();this.drawLogo();d="right"in this.ndata;b=this.opts.stacked!=null?this.stackedNdata:this.ndata;c=this.opts.area?Sai.AreaPlot:Sai.LinePlot;if(d){if(((g=this.ndata.left)!=null?g.__YVALS__[0]:void 0)<0)this.drawGuideline(0,"left");if(((f=this.ndata.right)!=null?f.__YVALS__[0]:void 0)<0)this.drawGuideline(0,"right")}else this.ndata.all.__YVALS__[0]<0&&this.drawGuideline(0,"all");this.plots=[];if(d){if(b.left!=null)this.plots.push((new c(this.r,this.px,this.py,this.pw,this.ph,b.left)).render(this.colors,
(j=this.opts.lineWidth)!=null?j:2,this.opts.stacked,this.getBaseline("left")));if(b.right!=null)return this.plots.push((new c(this.r,this.px,this.py,this.pw,this.ph,b.right)).render(this.colors,(h=this.opts.lineWidth)!=null?h:2,this.opts.stacked,this.getBaseline("right")))}else return this.plots.push((new c(this.r,this.px,this.py,this.pw,this.ph,b.all)).render(this.colors,(i=this.opts.lineWidth)!=null?i:2,this.opts.stacked,this.getBaseline("all")))};a.prototype.renderFull=function(){var b,c,d,g,f,
j,h;this.drawTitle();this.setupInfoSpace();this.drawFootnote();this.drawLegend();"right"in this.ndata?this.addAxes(["left","right"]):this.addAxes(["all"]);this.renderPlots();this.plotSets=this.r.set();f=this.plots;d=0;for(g=f.length;d<g;d++){b=f[d];this.plotSets.push(b.set)}this.dots=this.r.set();for(c in this.ndata.all)if(c!=="__YVALS__")this.dots.push(this.r.circle(0,0,4).attr({fill:(j=(h=this.colors)!=null?h[c]:void 0)!=null?j:"black"}).hide());b=this.r.set().push(this.bg,this.plotSets,this.dots,
this.logo,this.guidelines).mousemove(e(function(i){var l,k,o,q,n,r,t,s,u,w;k=this.getIndex(i);i={};if(((s=this.data[this.__LABELS__])!=null?s.length:void 0)>k&&k>=0){i[this.__LABELS__]=this.data[this.__LABELS__][k];for(n in this.ndata.all)if(this.data[n]!=null)i[n]=this.data[n][k]}this.drawInfo(i);l=0;s=[];for(n in this.ndata.all)n!=="__YVALS__"&&s.push(function(){u=this.plots;w=[];r=0;for(t=u.length;r<t;r++){o=u[r];if(n in o.dndata){q=o.dndata[n][k];q!=null?this.dots[l].attr({cx:q[0],cy:q[1]}).show().toFront():
this.dots[l].hide();w.push(l++)}}return w}.call(this));return s},this)).mouseout(e(function(){this.drawInfo({},true);return this.dots.hide()},this));this.opts.href&&b.attr({href:this.opts.href,target:"_blank"});return this};return a}()}).call(this);(function(){var m=function(a,b){return function(){return a.apply(b,arguments)}},p=Object.prototype.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var d in b)if(p.call(b,d))a[d]=b[d];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};Sai.GeoChart=function(){function a(){this.renderPlots=m(this.renderPlots,this);a.__super__.constructor.apply(this,arguments)}e(a,Sai.Chart);a.prototype.plotType=Sai.GeoPlot;a.prototype.interactiveHistogram=true;a.prototype.getMax=
function(b){return Math.max.apply(Math,b)};a.prototype.getMin=function(b){return Math.min.apply(Math,b)};a.prototype.normalize=function(b){var c,d,g,f,j,h,i,l,k,o,q,n,r,t,s;this.ndata={};this.bounds={};f={};h={};for(k in b)if(!(k.match("^__")||k===this.__LABELS__))if(b[k]!=null){n=b[k];t=[];o=0;for(q=n.length;o<q;o++){c=n[o];c!=null&&t.push(c)}c=t;f[k]=this.getMax(c,k);if(!(typeof i!="undefined"&&i!==null)||f[k]>i)i=f[k];h[k]=this.getMin(c,k);if(!(typeof l!="undefined"&&l!==null)||h[k]<l)l=h[k]}c=
[];for(k in b)if(!(k.match("^__")||k===this.__LABELS__))if(b[k]!=null){if(this.opts.groupedNormalization){g=i;j=l}else{g=f[k];j=h[k]}this.bounds[k]=[j,g];this.ndata[k]={};c.push(this.ndata[k][k]=function(){s=[];d=0;for(r=b[k].length;0<=r?d<r:d>r;0<=r?d+=1:d-=1)s.push(b[k][d]!=null?[d/(b[k].length-1),(b[k][d]-j)/(g-j)]:null);return s}())}return c};a.prototype.dataGroups=function(b){var c,d;c=[];for(d in b)if(d.match("^__")||d===this.__LABELS__)c.push(d);c={__META__:c};for(d in b)d.match("^__")||d===
this.__LABELS__||(c[d]=[d]);return c};a.prototype.setupHistogramInteraction=function(b,c){return b.click(m(function(){return this.renderPlots(c)},this)).hover(m(function(d){return m(function(){d.attr({"fill-opacity":0.75});return this.drawInfo({"Click to display on map":c})},this)},this)(b),m(function(d){return m(function(){d.attr({"fill-opacity":1});return this.drawInfo()},this)},this)(b))};a.prototype.renderPlots=function(b){var c,d;this.px==null&&this.setPlotCoords();if((c=this.bg)!=null)c.remove();
if((c=this.logo)!=null)c.remove();if((c=this.geoPlot)!=null)c.set.remove();this.drawBG();this.drawLogo();c={};for(d in this.ndata)c[d]=this.ndata[d][d];this.geoPlot=(new this.plotType(this.r,this.px,this.py,this.pw,this.ph,c,this.data,{fromWhite:this.opts.fromWhite})).render(this.colors||{},this.data.__MAP__,this.__LABELS__,b!=null?b:this.data.__DEFAULT__,this.opts.bgcolor,this.opts.interactive&&!this.opts.simple,this.drawInfo);return this};a.prototype.default_info=function(){return{"":this.opts.interactive?
"Click histogram below to change map display":""}};a.prototype.renderFull=function(){var b,c,d;this.drawTitle();this.setupInfoSpace();this.drawFootnote();this.drawHistogramLegend(function(){d=[];for(c in this.data)c.match("^__")||c===this.__LABELS__||d.push(c);return d}.call(this));this.setPlotCoords();this.drawInfo();this.renderPlots();b=this.r.set().push(this.geoPlot.set,this.bg,this.logo,this.info,this.footnote);this.opts.href&&b.attr({href:this.opts.href,target:"_blank"});return this};return a}();
Sai.ChromaticGeoChart=function(){function a(){a.__super__.constructor.apply(this,arguments)}e(a,Sai.GeoChart);a.prototype.plotType=Sai.ChromaticGeoPlot;a.prototype.interactiveHistogram=false;a.prototype.default_info=function(){return{}};a.prototype.setupHistogramInteraction=function(){return false};return a}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.BarChart=function(){function e(){e.__super__.constructor.apply(this,arguments)}p(e,Sai.Chart);e.prototype.getMin=function(){return Math.min(e.__super__.getMin.apply(this,arguments),0)};e.prototype.groupsToNullPad=function(){var a,b;b=[];for(a in this.dataGroups())b.push(a);return b};
e.prototype.tooMuchData=function(){var a,b,c;b=this.w/3;a=0;for(c in this.data)if(c!==this.__LABELS__){a+=this.data[c].length;if(this.opts.stacked)break}return a>b};e.prototype.renderPlots=function(){var a,b,c,d,g;this.px==null&&this.setPlotCoords();this.drawLogo();this.drawBG();if(this.tooMuchData()){this.showError("Sorry, the chart isn't wide enough to plot this much data.\n \nPossible solutions include downsampling your data\n (e.g. weekly instead of daily) or using a line chart");return this}if("all"in
this.ndata){this.guidelines=this.r.set();g=this.ndata.all.__YVALS__.slice(1,this.ndata.all.__YVALS__.length-1);b=0;for(c=g.length;b<c;b++){a=g[b];this.drawGuideline(a)}}this.plots=this.r.set();a={};c={};c[this.__LABELS__]=this.data[this.__LABELS__];b=this.opts.stacked!=null?this.stackedNdata:this.ndata;for(d in b.all)if(!(d.match("^__")||d===this.__LABELS__)){a[d]=b.all[d];c[d]=this.data[d]}return this.plots.push((new Sai.BarPlot(this.r,this.px,this.py,this.pw,this.ph,a,c)).render(this.opts.stacked!=
null,this.normalizedHeight(0,"all"),this.colors,this.opts.interactive&&!this.opts.simple,this.drawInfo,this.__LABELS__).set)};e.prototype.renderFull=function(){var a;this.drawTitle();this.setupInfoSpace();this.drawFootnote();this.drawLegend();this.addAxes(["all"]);this.renderPlots();a=this.r.set().push(this.plots,this.bg,this.logo,this.guidelines);this.opts.href&&a.attr({href:this.opts.href,target:"_blank"});return this};return e}()}).call(this);(function(){var m=Object.prototype.hasOwnProperty,p=function(e,a){function b(){this.constructor=e}for(var c in a)if(m.call(a,c))e[c]=a[c];b.prototype=a.prototype;e.prototype=new b;e.__super__=a.prototype;return e};Sai.StreamChart=function(){function e(a,b,c,d,g,f,j,h){this.r=a;this.x=b;this.y=c;this.w=d;this.h=g;this.__LABELS__=j;this.opts=h;this.opts.stacked=true;e.__super__.constructor.apply(this,arguments)}p(e,Sai.LineChart);e.prototype.getStackedMax=function(){return e.__super__.getStackedMax.apply(this,
arguments)/2};e.prototype.getStackedMin=function(a,b){var c,d;c=e.__super__.getStackedMin.apply(this,arguments);d=this.getStackedMax(a,b);return c-d};e.prototype.normalize=function(a){var b,c,d,g,f,j,h,i,l,k,o,q,n,r,t,s;e.__super__.normalize.apply(this,arguments);c=this.dataGroups(this.data);this.baselines!=null||(this.baselines={});r=[];for(b in this.stackedNdata){g=this.normalizedHeight(0,b!=null?b:"all");this.normalizedHeight(this.getStackedMin(a,c[b]),b);this.baselines[b]=[];var u=this.ndata[b];
q=this.ndata[b].__YVALS__;t=[];k=0;for(o=q.length;k<o;k++){l=q[k];t.push(Math.abs(l))}u.__YVALS__=t;for(h in this.stackedNdata[b])i=h;r.push(function(){s=[];d=0;for(n=this.stackedNdata[b][h].length;0<=n?d<n:d>n;0<=n?d+=1:d-=1){f=(this.stackedNdata[b][i][d][1]-g)/2;for(h in this.stackedNdata[b]){j=this.stackedNdata[b][h][d];if(j!=null)j[1]-=f}s.push(this.baselines[b].push([j[0],g-f]))}return s}.call(this))}return r};e.prototype.addAxes=function(a,b){if(b==null)b={};"left"in b||(b.left="magnitude");
return e.__super__.addAxes.call(this,a,b)};e.prototype.getBaseline=function(a){return this.baselines[a]};return e}()}).call(this);
